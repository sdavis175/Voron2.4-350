[gcode_macro G32]
gcode:
    G28
    QGL
    G28 Z

######################### CONDITIONAL HOMING #########################
# https://github.com/AndrewEllis93/v2.247_backup_klipper_config/blob/master/macros.cfg

# Conditional G28 (home if not already homed)
[gcode_macro CG28]
gcode:
	{% if "xyz" not in printer.toolhead.homed_axes %}
		G28
	{% endif %}
	
# Conditional G28 (home if not already homed)
[gcode_macro XYCG28]
gcode:
	{% if "xy" not in printer.toolhead.homed_axes %}
		G28 X Y
	{% endif %}

[gcode_macro ZCG28]
gcode:
	{% if "z" not in printer.toolhead.homed_axes %}
		G28 Z
	{% endif %}